(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["markdown"],{"36b9":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","highlight-current-row":"true"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"序号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),a("el-table-column",{attrs:{label:"帐号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),a("el-table-column",{attrs:{prop:"address",label:"性别","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"address",label:"用户类型","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"address",label:"上次登录时间","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"address",label:"上次登录IP","show-overflow-tooltip":""}})],1),a("div",{staticClass:"block",staticStyle:{"text-align":"right"}},[a("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[10,20,50,100],"page-size":e.tablePageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tablePageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},l=[],n=(a("ac6a"),{data:function(){return{tableData:[],tablePageSize:10,tablePageTotal:100,input3:"",multipleSelection:[]}},methods:{toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){console.log(e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e))}}}),s=n,o=(a("4e28"),a("2877")),r=Object(o["a"])(s,i,l,!1,null,"2f04d916",null);t["default"]=r.exports},"4e28":function(e,t,a){"use strict";var i=a("7943"),l=a.n(i);l.a},5654:function(e,t,a){},7943:function(e,t,a){},b418:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"header"},[a("div",{staticClass:"input"},[a("el-select",{style:{"margin-left":"20px"},attrs:{clearable:"",placeholder:"请选择"},on:{change:e.loadData},model:{value:e.spaceId,callback:function(t){e.spaceId=t},expression:"spaceId"}},e._l(e.spaces,(function(t,i){return a("el-option",{key:i,attrs:{label:t.name,value:t.id}},[e._v("\n\t\t\t\t\t\t"+e._s(t.name)+"\n          ")])})),1),a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择日期"},on:{change:function(t){return e.loadData()}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),a("div",{staticClass:"table-header"},[a("el-button",{attrs:{type:"primary",plain:"",disabled:e.addPSpace},on:{click:function(t){return e.add()}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加排场")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%","background-color":"#FFFFFF"},attrs:{data:e.tableData,"tooltip-effect":"dark",border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"line fe"},[e._v("屏幕")]),e._l(e.format(t.row.info),(function(t,i){return a("div",{key:i,staticStyle:{"text-align":"center"},attrs:{index:i}},[e._l(t,(function(e,t){return a("div",{key:t,class:{infoItem:!0,color:e},attrs:{index:t}})})),a("span",{staticClass:"size"},[e._v(e._s(t.length)+"位")])],2)}))]}}])}),a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"movieName",align:"center","show-overflow-tooltip":"",label:"电影名称"}}),a("el-table-column",{attrs:{prop:"name",align:"center",width:"150","show-overflow-tooltip":"",label:"场地名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",width:"150",align:"center",label:"场地位置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-location"}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.address))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"场地容量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success",effect:"plain","disable-transitions":""}},[a("span",[e._v(e._s(t.row.total)+"位")])])]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",label:"场地剩余容量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success",effect:"plain","disable-transitions":""}},[a("span",[e._v(e._s(t.row.num)+"位")])])]}}])}),a("el-table-column",{attrs:{"disable-transitions":"",width:"85",align:"center",label:"影票单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"danger","disable-transitions":""}},[a("span",[e._v(e._s(e._f("price")(t.row.price,t.row.price))+" 元")])])]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",label:"影票VIP单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"warning","disable-transitions":""}},[a("span",[e._v(e._s(e._f("price")(t.row.vipPrice,t.row.vipPrice))+" 元")])])]}}])}),a("el-table-column",{attrs:{width:"125",align:"center",label:"售卖日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info","disable-transitions":""}},[a("span",[a("i",{staticClass:"el-icon-time"}),e._v(" "+e._s(e._f("formatTime")(t.row.stroeTime,t.row.stroeTime,"YYYY-MM-DD")))])])]}}])}),a("el-table-column",{attrs:{width:"110",align:"center",label:"播放日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info","disable-transitions":""}},[a("span",[a("i",{staticClass:"el-icon-time"}),e._v(" "+e._s(e._f("formatTime")(t.row.date,t.row.date,"YYYY-MM-DD")))])])]}}])}),a("el-table-column",{attrs:{align:"center",label:"排场状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:2==t.row.status?"danger":"success","disable-transitions":""}},[2==t.row.status?a("span",[e._v("已过期")]):e._e(),0==t.row.status?a("span",[e._v("待上线")]):a("span",[e._v("进行中")])])]}}])}),a("el-table-column",{attrs:{label:"播放时间",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info",effect:"plain","disable-transitions":""}},[a("span",[a("i",{staticClass:"el-icon-time"}),e._v(e._s(t.row.upTime))])])]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",label:"结束播放时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"warning",effect:"plain","disable-transitions":""}},[a("span",[a("i",{staticClass:"el-icon-time"}),e._v(e._s(t.row.downTime))])])]}}])}),a("el-table-column",{attrs:{label:"创建时间",width:"150",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.createTime))])]}}])}),a("el-table-column",{attrs:{width:"150",align:"center",label:"更新时间","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.updateTime))])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"text-align":"right"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.tablePageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tablePageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"520px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.userInfo,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"电影名称"}},[a("el-select",{style:{"margin-left":"20px"},attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){return e.selectChange(e.movieId)}},model:{value:e.movieId,callback:function(t){e.movieId=t},expression:"movieId"}},e._l(e.movies,(function(t,i){return a("el-option",{key:i,attrs:{label:t.name,value:t.id}},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t")])})),1)],1),a("el-form-item",{attrs:{label:"播放时间"}},[a("el-time-picker",{attrs:{"is-range":"","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),a("el-form-item",{attrs:{label:"单价"}},[a("el-input-number",{style:{"margin-left":"20px"},attrs:{precision:2,step:.1},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}})],1),a("el-form-item",{attrs:{label:"VIP单价"}},[a("el-input-number",{style:{"margin-left":"20px"},attrs:{precision:2,step:.1},model:{value:e.vipPrice,callback:function(t){e.vipPrice=t},expression:"vipPrice"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},l=[],n=(a("28a5"),a("ac6a"),a("a481"),{data:function(){var e=this,t=function(t,a,i){""===a?i(new Error("请输入密码")):(""!==e.userInfo.password&&e.$refs.ruleForm.validateField("password2"),i())},a=function(t,a,i){""===a?i(new Error("请再次输入密码")):a!==e.ruleForm.password?i(new Error("两次输入密码不一致!")):i()};return{title:"",delAllLoading:!1,addPSpace:!0,tableData:[],tablePageSize:10,tablePageTotal:0,currentPage:1,input:"",movies:[],spaces:[],loading:!1,status:"",multipleSelection:[],page:1,dialogFormVisible:!1,showPassword:!0,userInfo:{name:"",userName:"",password:""},id:"",time:"",spaceId:"",movieId:"",movieInfo:{},date:"",ids:[],price:0,vipPrice:0,infoDialog:!1,rules:{pass:[{validator:t,trigger:"blur"}],checkPass:[{validator:a,trigger:"blur"}]}}},methods:{loadData:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.date&&this.spaceId&&(this.addPSpace=!1),this.loading=!0;var t={};this.date&&(t.date=this.date.toLocaleDateString().replace("/","-").replace("/","-")),t.page=this.page,t.size=this.tablePageSize,t.sId=this.spaceId,this.$GET(this.$API.ADMIN.AdminQueryPSpace,t).then((function(t){e.tablePageTotal=t.data.total,e.tableData=t.data.details,e.loading=!1})).catch((function(t){e.loading=!1}))},filterTag:function(e,t){return t.status==e},selectChange:function(e){var t=this;this.movies.forEach((function(a){a.id==e&&(t.price=a.price,t.vipPrice=a.vipPrice)}))},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},format:function(e){return JSON.parse(e)},info:function(e){this.id=e.id,e.info?this.movieInfo=JSON.parse(e.info):this.movieInfo={},this.infoDialog=!0},infoSubmit:function(){var e=this;this.$POST(this.$API.ADMIN.AdminInsertUpdate,{id:this.id,info:JSON.stringify(this.movieInfo)}).then((function(t){e.$message.success("修改成功")})),this.infoDialog=!1,this.loadData()},handleSelectionChange:function(e){this.multipleSelection=e,this.ids=e.map((function(e){return e.id}))},handleSizeChange:function(e){this.loadData(this.page,this.tablePageSize)},handleCurrentChange:function(e){this.page=e,this.loadData(e,this.tablePageSize)},edit:function(e){this.title="修改排场信息",this.movieId=e.movieName,this.price=e.price,this.vipPrice=e.vipPrice,this.dialogFormVisible=!0;new Date;var t=new Date("1970-01-01 ".concat(e.downTime)),a=new Date("1970-01-01 ".concat(e.downTime));this.$set(this,"time",[t,a]),this.userInfo=e,this.userInfo.userUpdate=!0,this.userInfo.statueTmp="ACTIVE"==this.userInfo.status,this.userInfo.roleTmp=0==this.userInfo.role?"普通客户":""},add:function(){this.price=0,this.vipPrice=0,this.userInfo={},this.userInfo={userUpdate:!1},this.title="添加排场",this.dialogFormVisible=!0},del:function(e){var t=this;e.loadding=!0,this.userInfo=e,this.$POST(this.$API.ADMIN.AdminInsertUpdate,{id:this.userInfo.id,deleted:1}).then((function(a){t.$message.success("删除成功"),e.loadding=!1,t.loadData(),t.dialogFormVisible=!1}))},delAll:function(){var e=this;this.ids.length<=0?this.$message.error("请选择排场"):(this.delAllLoading=!0,this.ids.forEach((function(t){e.$POST(e.$API.ADMIN.AdminInsertUpdate,{id:t,deleted:1})})),this.$message.success("批量删除成功"),this.delAllLoading=!1,this.loadData())},loadMovie:function(){var e=this;this.$GET(this.$API.ADMIN.AdminLoadMovie,{}).then((function(t){e.movies=t.data}))},loadSpace:function(){var e=this;this.$GET(this.$API.ADMIN.AdminLoadSpace,{}).then((function(t){e.spaces=t.data}))},submit:function(){var e=this,t=this.time[0].toTimeString().split(" ")[0],a=this.time[1].toTimeString().split(" ")[0],i=this.userInfo;null==i.mId&&(i.mId=this.movieId),null==i.sId&&(i.sId=this.spaceId),null==i.date&&(i.date=this.date.toLocaleDateString().replace("/","-").replace("/","-")),i.upTime=t,i.downTime=a,i.price=this.price,i.vipPrice=this.vipPrice,this.$POST(this.$API.ADMIN.AdminInsertUpdatePSpace,i).then((function(t){e.dialogFormVisible=!1,e.userInfo.userUpdate?e.$message.success("修改成功"):e.$message.success("添加成功"),e.loadData()}))}},created:function(){this.loadMovie(),this.loadSpace(),this.loadData()}}),s=n,o=(a("ef3f"),a("2877")),r=Object(o["a"])(s,i,l,!1,null,"e48fb468",null);t["default"]=r.exports},ef3f:function(e,t,a){"use strict";var i=a("5654"),l=a.n(i);l.a}}]);