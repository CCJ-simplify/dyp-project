webpackJsonp([1],{"4BTU":function(t,s){},"4ml/":function(t,s){},"8fMo":function(t,s){},"97YD":function(t,s){},E51W:function(t,s){},JkUf:function(t,s){},KrAr:function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("/5sW"),n={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]};var a=e("VU/8")({name:"App"},n,!1,function(t){e("4BTU")},null,null).exports,o=e("/ocq"),r={name:"",data:function(){return{list:[],loading:!1,finished:!1,isLoading:!1,page:1,size:10}},methods:{onLoad:function(){this.page++,this.loadData()},onRefresh:function(){this.page=1,this.size=10,this.loadData(!0)},go:function(t,s){this.$router.push({name:"movies",params:{name:s,id:t}})},onClickItem:function(t,s){this.go(t,s)},chooseYY:function(){this.$Post(this.$API.CUSTOMER.CustmerChooseYY+"/"+this.id,{}).then(function(t){})},loadData:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.$Get(this.$API.CUSTOMER.CustomerQueryMovice,{id:this.id,page:this.page,size:this.size}).then(function(e){e.data.details&&e.data.details.length>0?t?s.list=e.data.details:e.data.details.forEach(function(t){s.list.push(t)}):s.finished=!0,s.loading=!1,s.isLoading=!1})}},created:function(){this.id=this.$route.params.id,this.loadData(),this.chooseYY()}},l={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(s){t.isLoading=s},expression:"isLoading"}},[e("van-list",{attrs:{finished:t.finished,"finished-text":"我是有底线的..."},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[t._l(t.list,function(s){return e("van-card",{key:s.id,class:{underline:!0},on:{click:function(e){return t.onClickItem(s.id,s.name)}}},[e("div",{attrs:{slot:"thumb"},slot:"thumb"},[e("van-image",{attrs:{"lazy-load":"",src:s.imgUrl}})],1),t._v(" "),e("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("\n          "+t._s(s.name)+"\n          "),s.version?e("van-tag",{attrs:{type:"primary",size:"medium",plain:""}},[t._v(t._s(s.version))]):t._e()],1),t._v(" "),e("div",{staticClass:"dy-cntent",attrs:{slot:"desc"},slot:"desc"},[s.sc?e("div",{staticClass:"content-item"},[t._v("观众评分:"),e("span",{staticClass:"pf"},[t._v(t._s(s.sc))])]):t._e(),t._v(" "),e("div",{staticClass:"content-item"},[t._v(t._s(s.title))]),t._v(" "),e("div",{staticClass:"content-item"},[t._v(t._s(s.star))]),t._v(" "),e("div",{staticClass:"content-item show-info",attrs:{title:s.content}},[t._v(t._s(s.content))])]),t._v(" "),e("div",{staticClass:"go",attrs:{slot:"num"},slot:"num"},[1==s.status?e("van-button",{attrs:{round:"",size:"mini",type:"danger"},on:{click:function(e){return t.go(s.id,s.name)}}},[t._v("购买")]):e("van-button",{attrs:{round:"",size:"mini",type:"info"}},[t._v("预售")])],1)])}),t._v(" "),e("div",{attrs:{slot:"loading"},slot:"loading"},[e("van-loading",{attrs:{type:"spinner",color:"#1989fa"}},[t._v("玩命加载中...")])],1)],2)],1)],1)},staticRenderFns:[]};var c=e("VU/8")(r,l,!1,function(t){e("JkUf")},"data-v-19002bb4",null).exports,u={name:"",data:function(){return{title:"电影票",isShow:!1,active:0,shift:"yyList",isShowTitle:!0,noMarginTop:!1}},methods:{change:function(t){"my"===t?(this.isShowTitle=!1,this.noMarginTop=!0):this.isShowTitle=!0,this.shift=t},onClickLeft:function(){this.$router.go(-1)}},props:{},components:{DyList:c},mounted:function(){var t=this.$router.history.current.name;this.change(t)}},d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("van-nav-bar",{directives:[{name:"show",rawName:"v-show",value:t.isShowTitle,expression:"isShowTitle"}],attrs:{fixed:!0}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],attrs:{slot:"left"},on:{click:t.onClickLeft},slot:"left"},[e("van-icon",{attrs:{name:"arrow-left"}}),t._v(" "),e("span",{staticClass:"back-text"},[t._v("返回")])],1),t._v(" "),e("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))])]),t._v(" "),e("div",{class:{body:!0,"no-margin":t.noMarginTop}},[e("router-view")],1),t._v(" "),e("div",{staticClass:"footer"},[e("div",{staticStyle:{width:"100%"}},[e("mu-bottom-nav",{attrs:{value:t.shift,shift:"",color:"#e54847"},on:{"update:value":function(s){t.shift=s},change:t.change}},[e("mu-bottom-nav-item",{attrs:{value:"yyList",to:"/main/yyList",title:"电影院",icon:"videocam"}}),t._v(" "),e("mu-bottom-nav-item",{attrs:{value:"order",to:"/main/order",title:"订单",icon:"library_books"}}),t._v(" "),e("mu-bottom-nav-item",{attrs:{value:"my",to:"/main/my",title:"我的",icon:"person"}})],1)],1)])],1)},staticRenderFns:[]};var v=e("VU/8")(u,d,!1,function(t){e("eM67")},"data-v-2f175a72",null).exports,h={name:"",data:function(){return{value:"",show:!1,list:[],loading:!1,finished:!1,isLoading:!1,page:1,size:10}},methods:{onSearch:function(){this.page=1,this.size=10,this.loadData(!0)},onFocus:function(){this.show=!0},onBlur:function(){this.show=!1},loadData:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$Get(this.$API.CUSTOMER.CustmerQueryYYInfo,{page:this.page,size:this.size,name:this.value}).then(function(e){e.data&&e.data.length>0?s?t.list=e.data:e.data.forEach(function(s){t.list.push(s)}):(t.finished=!0,s&&(t.list=e.data)),t.loading=!1,t.isLoading=!1})},dyList:function(t){this.$router.push("/main/dyList/"+t)},onLoad:function(){this.page++,this.loadData()},onRefresh:function(){this.page=1,this.size=10,this.loadData(!0)}},mounted:function(){this.loadData()}},f={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("form",{attrs:{action:"/"}},[e("van-search",{attrs:{placeholder:"请输入搜索关键词","show-action":""},on:{focus:t.onFocus,blur:t.onBlur,search:t.onSearch},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}},[e("div",{attrs:{slot:"action"},on:{click:t.onSearch},slot:"action"},[t._v("搜索")])])],1),t._v(" "),e("div",{staticClass:"body"},[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(s){t.isLoading=s},expression:"isLoading"}},[e("van-list",{attrs:{finished:t.finished,"finished-text":"我是有底线的..."},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[t._l(t.list,function(s){return e("van-card",{key:s.id,class:{underline:!0},on:{click:function(e){return t.dyList(s.id)}}},[e("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("\n            "+t._s(s.name)+"\n          ")]),t._v(" "),e("div",{staticClass:"dy-cntent",attrs:{slot:"desc"},slot:"desc"},[e("div",{staticClass:"flex line-ellipsis"},[t._v(t._s(s.address))])]),t._v(" "),s.yyInfo?e("div",{attrs:{slot:"tags"},slot:"tags"},[e("van-notice-bar",{attrs:{text:s.yyInfo,"left-icon":"volume-o"}})],1):t._e()])}),t._v(" "),e("div",{attrs:{slot:"loading"},slot:"loading"},[e("van-loading",{attrs:{type:"spinner",color:"#1989fa"}},[t._v("玩命加载中...")])],1)],2)],1),t._v(" "),e("van-overlay",{style:{"z-index":2,"margin-top":"6.375rem"},attrs:{show:t.show},on:{click:function(s){t.show=!t.show}}})],1)])},staticRenderFns:[]};var m=e("VU/8")(h,f,!1,function(t){e("QtNN")},"data-v-16a2e379",null).exports,p={name:"",data:function(){return{list:[],loading:!1,finished:!1,isLoading:!1,status:"",page:1,size:10}},methods:{onLoad:function(){this.page++,this.loadData()},onRefresh:function(){this.page=1,this.size=10,this.loadData(!0)},go:function(t){this.$router.push("orderDetail/"+t.orderSn+"/"+t.yId)},outTime:function(t){return new Date(t).getTime()},onClickItem:function(t){1!=t.status&&0!=t.status||this.go(t)},loadData:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.$Get(this.$API.CUSTOMER.CustomerQueryOrder,{page:this.page,size:this.size,status:this.status}).then(function(e){e.data.details&&e.data.details.length>0?t?s.list=e.data.details:e.data.details.forEach(function(t){s.list.push(t)}):s.finished=!0,s.loading=!1,s.isLoading=!1})}},mounted:function(){this.status=this.$route.params.status,void 0==this.status&&(this.status=null),this.loadData()}},_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(s){t.isLoading=s},expression:"isLoading"}},[e("van-list",{attrs:{finished:t.finished,"finished-text":"我是有底线的..."},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[t._l(t.list,function(s){return e("van-card",{key:s.id,class:{underline:!0},on:{click:function(e){return t.onClickItem(s)}}},[e("div",{attrs:{slot:"thumb"},slot:"thumb"},[e("van-image",{attrs:{"lazy-load":"",src:s.movieUrl}})],1),t._v(" "),e("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"van-ellipsis"},[t._v(t._s(s.movieName))]),t._v(" "),s.version?e("van-tag",{attrs:{type:"primary",size:"medium",plain:""}},[t._v(t._s(s.version))]):t._e()],1),t._v(" "),e("div",{staticClass:"dy-cntent",attrs:{slot:"desc"},slot:"desc"},[e("div",{staticClass:"content-item"},[e("div",{staticClass:"van-ellipsis"},[t._v(t._s(s.title))])]),t._v(" "),e("div",{staticClass:"content-item show-info",attrs:{title:s.content}},[e("div",{staticClass:"van-ellipsis"},[t._v(t._s(s.content))])])]),t._v(" "),e("div",{attrs:{slot:"price"},slot:"price"},[t._v(t._s(t._f("price")(s.price,s.price))+"  * "+t._s(s.num)+" = "+t._s(t._f("price")(s.total,s.total))+" 元")]),t._v(" "),e("div",{staticClass:"go",attrs:{slot:"num"},slot:"num"},[1==s.status?e("van-button",{attrs:{type:"danger",hairline:""}},[t._v("已付款")]):t._e(),t._v(" "),0==s.status?e("van-button",{attrs:{type:"default",plain:"",hairline:""}},[t._v("\n            待支付\n          ")]):t._e(),t._v(" "),5==s.status?e("van-button",{attrs:{type:"warning",hairline:""}},[t._v("已超时")]):t._e(),t._v(" "),6==s.status?e("van-button",{attrs:{type:"danger",plain:"",hairline:"",disabled:""}},[t._v("已取消")]):t._e(),t._v(" "),4==s.status?e("van-button",{attrs:{type:"primary",plain:"",hairline:""}},[t._v("已完成")]):t._e(),t._v(" "),3==s.status?e("van-button",{attrs:{type:"warning",plain:"",hairline:""}},[t._v("已过期")]):t._e(),t._v(" "),2==s.status?e("van-button",{attrs:{type:"info",plain:"",hairline:""}},[t._v("已出票")]):t._e(),t._v(" "),0==s.status&&s.outTime>0?e("van-count-down",{attrs:{time:s.outTime}}):t._e()],1)])}),t._v(" "),e("div",{attrs:{slot:"loading"},slot:"loading"},[e("van-loading",{attrs:{type:"spinner",color:"#1989fa"}},[t._v("玩命加载中...")])],1)],2)],1)],1)},staticRenderFns:[]};var g=e("VU/8")(p,_,!1,function(t){e("KrAr")},"data-v-24e81f7f",null).exports,w={data:function(){return{info:[],src:"",name:"",size:0,numberShow:!1,showInput:!1,showKeyboard:!1,password:"",isShow:!0,showPopup:!1,total:0,orderSn:"",status:0}},methods:{onClickLeft:function(){this.$router.go(-1)},overLayClick:function(){this.showInput=!1,this.numberShow=!1},onInput:function(t){var s=this;this.password=(this.password+t).slice(0,6),this.password.length>=6&&(this.numberShow=!1,this.$Post(this.$API.CUSTOMER.CustmerPayOrder,{orderSn:this.orderSn,payPassword:this.password,yId:this.$route.params.yId}).then(function(t){s.$toast.success("支付成功"),s.numberShow=!1,s.showInput=!1,s.status=1}))},pay:function(){this.showPopup=!1,this.showKeyboard=!0,this.showInput=!0,this.numberShow=!0},passwordInput:function(){this.numberShow=!0,this.showKeyboard=!0},onDeleted:function(){this.password=this.password.slice(0,this.password.length-1)},cancel:function(){var t=this;this.$Post(this.$API.CUSTOMER.CustomerCancelOrder+"/"+this.orderSn+"/"+this.$route.params.yId,{}).then(function(s){t.$toast.success("取消支付成功"),t.$router.go(-1)})}},mounted:function(){var t=this,s={orderSn:this.$route.params.orderSn,yId:this.$route.params.yId};this.$Get(this.$API.CUSTOMER.CustomerqueryByOrderSn,s).then(function(s){var e=s.data;t.info=JSON.parse(s.data.info),t.size=t.info.length,t.src=t.$API.QRCODE+"/"+e.yId+"/"+e.orderSn,t.name=e.movieName,t.total=e.total,t.status=e.status,t.orderSn=e.orderSn}),this.$forceUpdate()}},y={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"back-text"},[e("van-nav-bar",{attrs:{fixed:!0}},[e("div",{staticClass:"backtext",attrs:{slot:"left"},on:{click:t.onClickLeft},slot:"left"},[e("van-icon",{attrs:{name:"arrow-left"}}),t._v(" "),e("span",[t._v("返回")])],1),t._v(" "),e("div",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.name))])]),t._v(" "),e("div",{staticClass:"qrcode"},[e("van-image",{attrs:{width:"300",height:"300",src:t.src}})],1),t._v(" "),e("div",{staticClass:"middle"},[e("van-divider",{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 16px"},attrs:{"content-position":"center"}},[t._v("\n      共:"+t._s(t.info.length)+"张\n    ")])],1),t._v(" "),e("van-list",t._l(t.info,function(s){return e("van-card",{key:s.id},[e("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"address"},[t._v(t._s(s.address))]),t._v(" "),e("div",{staticClass:"spaceName"},[t._v(t._s(s.spaceName))]),t._v(" "),e("div",{staticClass:"location"},[t._v(t._s(s.location))]),t._v(" "),e("div",{staticClass:"upTime"},[e("i",{staticClass:"el-icon-time"}),t._v(t._s(s.upTime)+"-"),e("i",{staticClass:"el-icon-time"}),t._v(t._s(s.downTime))])]),t._v(" "),e("van-divider",{attrs:{dashed:""}})],1)}),1),t._v(" "),0==t.status?e("div",[e("van-button",{attrs:{type:"info",block:""},on:{click:t.pay}},[t._v("支付")]),t._v(" "),e("van-button",{attrs:{type:"danger",block:""},on:{click:t.cancel}},[t._v("取消支付")])],1):t._e(),t._v(" "),e("van-overlay",{attrs:{show:t.showInput}},[e("div",{staticClass:"passPopup"},[e("div",{staticClass:"content"},[e("div",{staticClass:"closse"},[e("van-icon",{attrs:{name:"cross"},on:{click:function(s){return t.overLayClick()}}})],1),t._v(" "),e("div",{staticClass:"title"},[t._v("请输入支付密码")])]),t._v(" "),e("div",{staticClass:"tip"},[t._v("电影票:"+t._s(t.size)+"张")]),t._v(" "),e("div",{staticClass:"total"},[t._v("￥"+t._s(t._f("price")(t.total,t.total)))]),t._v(" "),t.showInput?e("van-password-input",{attrs:{value:t.password,info:"请输入6位密码",focused:t.showKeyboard},on:{focus:t.passwordInput}}):t._e()],1),t._v(" "),e("van-number-keyboard",{attrs:{show:t.numberShow},on:{input:t.onInput,delete:t.onDeleted}})],1)],1)},staticRenderFns:[]};var C=e("VU/8")(w,y,!1,function(t){e("h0l5")},"data-v-98b75f54",null).exports,b={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"title-fix"},[t._v("\n    我的\n  ")]),t._v(" "),e("van-row",{staticClass:"image"},[e("van-col",{attrs:{span:"4",offset:"1"}},[e("van-image",{style:{"padding-bottom":"10px"},attrs:{width:"90px",height:"90px",src:t.info.img},scopedSlots:t._u([{key:"loading",fn:function(){return[e("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[e("van-icon",{attrs:{name:"info-o"}})]},proxy:!0}])})],1),t._v(" "),e("van-col",{attrs:{span:"6",offset:"4"}},[e("div",{staticClass:"wx-name"},[t._v("\n        "+t._s(t.info.wechatName)+"\n      ")])]),t._v(" "),e("van-col",{attrs:{span:"1",offset:"6"}},[e("van-icon",{style:{"line-height":"6rem",color:"#FFFFFF"},attrs:{name:"arrow"}})],1)],1),t._v(" "),e("van-row",[e("van-col",{attrs:{span:"24"}},[e("van-grid",{attrs:{"column-num":4,border:!1,square:"",clickable:""}},t._l(t.navList,function(s){return e("van-grid-item",{key:s.id,on:{click:function(e){return t.click(s.id)}}},[e("div",{attrs:{solt:"icon"}},[e("van-icon",{style:{"font-size":"2rem",color:s.color?s.color:"#000000"},attrs:{name:s.icon}})],1),t._v(" "),e("div",{attrs:{solt:"text"}},[t._v(t._s(s.name))])])}),1)],1)],1),t._v(" "),e("van-overlay",{attrs:{show:t.showInput}},[e("div",{staticClass:"passPopup"},[e("div",{staticClass:"content"},[e("div",{staticClass:"closse"},[e("van-icon",{attrs:{name:"cross"},on:{click:function(s){return t.overLayClick()}}})],1),t._v(" "),e("div",{staticClass:"title"},[t._v("请输入支付密码")])]),t._v(" "),e("div",{staticClass:"total"}),t._v(" "),t.showInput?e("van-password-input",{attrs:{value:t.password,info:"请输入6位密码",focused:t.showKeyboard},on:{focus:t.passwordInput}}):t._e()],1),t._v(" "),e("van-number-keyboard",{attrs:{show:t.numberShow},on:{input:t.onInput,delete:t.onDeleted}})],1)],1)},staticRenderFns:[]};var j=e("VU/8")({name:"",data:function(){return{info:{},navList:[{id:1,icon:"coupon-o",name:"全部订单",color:"#1989fa"},{id:2,icon:"todo-list-o",name:"待付款订单",color:"#FF6034"},{id:3,icon:"balance-list-o",name:"已完成订单",color:"#00D500"},{id:5,icon:"shopping-cart-o",name:"购物车",color:"#EE0A24"},{id:6,icon:"vip-card-o",name:"VIP",color:"#FAAF00"},{id:9,icon:"setting-o",name:"设置",color:""}],name:"",size:0,numberShow:!1,showInput:!1,showKeyboard:!1,password:"",isShow:!0,showPopup:!1}},methods:{onClickInfo:function(){this.$router.push("/user/info/2")},loadData:function(){var t=this;this.$Get(this.$API.CUSTOMER.CustmerInfo,{}).then(function(s){t.info=s.data})},overLayClick:function(){this.showInput=!1,this.numberShow=!1},onInput:function(t){var s=this;this.password=(this.password+t).slice(0,6),this.password.length>=6&&(this.numberShow=!1,this.$Post(this.$API.CUSTOMER.CustomerVIPOpen,{password:this.password}).then(function(t){s.$toast.success("支付成功"),s.numberShow=!1,s.showInput=!1}),this.password="")},passwordInput:function(){this.numberShow=!0,this.showKeyboard=!0},onDeleted:function(){this.password=this.password.slice(0,this.password.length-1)},click:function(t){7===t||5===t||8===t?this.$toast.success("该功能暂未开放"):1==t?(this.$router.push({name:"order",params:{status:""}}),this.$emit("change",["order"])):2==t?(this.$router.push({name:"order",params:{status:0}}),this.$emit("change",["order"])):3==t?(this.$router.push({name:"order",params:{status:4}}),this.$emit("change",["order"])):6==t&&(this.numberShow=!0,this.showInput=!0)}},mounted:function(){this.loadData()}},b,!1,function(t){e("YO/I")},"data-v-7c928e8a",null).exports,k={name:"",data:function(){return{isShowTitle:!0,numberShow:!1,showInput:!1,showKeyboard:!1,password:"",isShow:!0,showPopup:!1,moviesInfo:{},pspaceList:[],spaceLists:[],activeName:"",spaceList:[],total:0,finished:!1,loading:!0,location:[],id:"",size:0,info:{},orderSn:"",my:{}}},methods:{onClickLeft:function(){this.$router.go(-1)},overLayClick:function(){this.showInput=!1,this.numberShow=!1},onInput:function(t){var s=this;this.password=(this.password+t).slice(0,6),this.password.length>=6&&(this.numberShow=!1,this.$Post(this.$API.CUSTOMER.CustmerPayOrder,{orderSn:this.orderSn,payPassword:this.password,yId:this.my.yId}).then(function(t){s.$toast.success("支付成功"),s.loadData(),s.numberShow=!1,s.showInput=!1,s.size=0,s.total=0,s.location=[],s.password=""}))},passwordInput:function(){this.numberShow=!0,this.showKeyboard=!0},onDeleted:function(){this.password=this.password.slice(0,this.password.length-1)},onClick:function(t,s){this.onLoad(t)},onClickItem:function(t){this.showPopup=!0,this.info=t,(this.spaceLists.length<=0||t.id!=this.id)&&(this.id=t.id,this.spaceLists=JSON.parse(t.info),this.size=0)},submitOrder:function(){var t=this,s=[];this.$Get(this.$API.CUSTOMER.CustmerInfo,{}).then(function(s){t.my=s.data}),this.location.forEach(function(e){s.push({id:t.moviesInfo.id,movieName:t.info.movieName,address:t.info.address,spaceName:t.info.name,upTime:t.info.upTime,downTime:t.info.downTime,location:e.x+1+"行"+(e.y+1)+"位"})});var e=1==this.my.isVip?this.info.vipPrice:this.info.price,i={psId:this.id,movieUrl:this.moviesInfo.imgUrl,movieName:this.info.movieName,title:this.moviesInfo.title,content:this.moviesInfo.content,info:JSON.stringify(s),mId:this.moviesInfo.id,isVip:this.my.isVip,num:this.size,total:this.total/100,price:e,status:0,location:this.location};this.$Post(this.$API.CUSTOMER.CustmerOrderInsertUpdate,i).then(function(s){t.showPopup=!1,t.showKeyboard=!0,t.showInput=!0,t.numberShow=!0,t.orderSn=s.data})},onLoad:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""===s&&(s=this.activeName),this.spaceList=[],this.finished=!1,this.loading=!0,this.$forceUpdate(),this.$Get(this.$API.CUSTOMER.CustmerQueryPSpace,{mId:this.moviesInfo.id,page:1,size:1e4,date:s}).then(function(s){t.spaceList=s.data.details,t.finished=!0,t.loading=!1,t.$forceUpdate()})},itemClick:function(t,s,e){var i=this,n=!1;this.location.forEach(function(e){e.x==t&&e.y==s&&(i.size--,i.userInfo.isVip?i.total-=100*i.info.vipPrice:i.total-=100*i.info.price,n=!0)}),0==this.spaceLists[t][s]&&(this.size++,this.userInfo.isVip?this.total+=100*this.info.vipPrice:this.total+=100*this.info.price,this.spaceLists[t][s]=1,this.location.push({x:t,y:s})),n&&(this.spaceLists[t][s]=0,this.location=this.location.filter(function(e){return!(e.x==t&&e.y==s)})),this.$forceUpdate()},loadData:function(){var t=this;this.$Get(this.$API.CUSTOMER.CustmerQueryMovieById+"/"+this.moviesInfo.id,{}).then(function(s){t.moviesInfo=s.data})},loadNav:function(){for(var t=new Date,s=t.toLocaleDateString().split("/"),e=new Date(s[0],s[1],s[2]),i=0;i<5;i++)e.setTime(t.getTime()+24*i*60*60*1e3),0===i&&(this.activeName=e.toLocaleDateString().replace("/","-").replace("/","-")),this.pspaceList.push(e.toLocaleDateString().replace("/","-").replace("/","-"))}},props:{},mounted:function(){var t=this;this.moviesInfo=this.$route.params,this.loadData(),this.loadNav(),this.onLoad(),this.$Get(this.$API.CUSTOMER.CustmerInfo,{}).then(function(s){t.userInfo=s.data})}},I={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("van-nav-bar",{directives:[{name:"show",rawName:"v-show",value:t.isShowTitle,expression:"isShowTitle"}],attrs:{fixed:!0}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],attrs:{slot:"left"},on:{click:t.onClickLeft},slot:"left"},[e("van-icon",{attrs:{name:"arrow-left"}}),t._v(" "),e("span",{staticClass:"back-text"},[t._v("返回")])],1),t._v(" "),e("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.moviesInfo.name))])]),t._v(" "),e("div",{staticClass:"body"},[e("van-card",{attrs:{num:t.moviesInfo.num,desc:t.moviesInfo.content,title:t.moviesInfo.title,thumb:t.moviesInfo.imgUrl}},[e("div",{attrs:{slot:"price"},slot:"price"},[e("div",[t._v(t._s(t._f("formatTime")(t.moviesInfo.upTime,"YYYY-MM-DD"))+"  上映")]),t._v(" "),e("div",[t._v(t._s(t._f("formatTime")(t.moviesInfo.downTime,"YYYY-MM-DD"))+"  下线")])])])],1),t._v(" "),e("van-tabs",{on:{click:t.onClick},model:{value:t.activeName,callback:function(s){t.activeName=s},expression:"activeName"}},t._l(t.pspaceList,function(s,i){return e("van-tab",{key:i,attrs:{name:s,title:t._f("formatTime")(s,"MM月DD日")}})}),1),t._v(" "),e("van-list",{attrs:{finished:t.finished,"finished-text":"我是有底线的..."},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[t._l(t.spaceList,function(s,i){return e("div",{key:i,class:{underline:!0},on:{click:function(e){return t.onClickItem(s)}}},[e("div",{staticClass:"left"},[e("div",{staticClass:"item-div name"},[e("span",{staticClass:"title"},[t._v("电影场地名称:")]),e("span",{staticClass:"value"},[t._v(t._s(s.name))])]),t._v(" "),e("div",{staticClass:"item-div address"},[e("span",{staticClass:"title"},[t._v("影院位置:")]),e("span",{staticClass:"value"},[t._v(t._s(s.address))])]),t._v(" "),e("div",{staticClass:"item-div address"},[e("span",{staticClass:"title"},[t._v("剩余票数:")]),e("span",{staticClass:"value"},[t._v(t._s(s.num)+"张")])]),t._v(" "),e("div",{staticClass:"item-div address"},[e("span",{staticClass:"title"},[t._v("播放时间:")]),e("span",{staticClass:"value"},[t._v(t._s(s.upTime))])])]),t._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"item-div price"},[e("span",{staticClass:"title"},[t._v("单价:")]),e("span",{staticClass:"red value"},[t._v(t._s(t._f("price")(s.price,s.price))+"元")])]),t._v(" "),e("div",{staticClass:"item-div price"},[e("span",{staticClass:"title"},[t._v("VIP单价:")]),e("span",{staticClass:"red value"},[t._v(t._s(t._f("price")(s.vipPrice,s.vipPrice))+"元")])]),t._v(" "),e("div",{staticClass:"item-div time"},[e("span",{staticClass:"title"},[t._v("结束时间:")]),e("span",{staticClass:"value"},[t._v(t._s(s.downTime))])])])])}),t._v(" "),e("div",{attrs:{slot:"loading"},slot:"loading"},[e("van-loading",{attrs:{type:"spinner",color:"#1989fa"}},[t._v("玩命加载中...")])],1)],2),t._v(" "),e("van-popup",{style:{height:"70%"},attrs:{round:"",position:"bottom"},model:{value:t.showPopup,callback:function(s){t.showPopup=s},expression:"showPopup"}},[e("van-notice-bar",{attrs:{scrollable:!1,"left-icon":"volume-o"}},[t._v("\n      已选座位: "+t._s(t.size)+"   | 购买影票数量: "+t._s(t.size)+"\n    ")]),t._v(" "),e("div",{staticClass:"line fe"},[t._v("屏幕")]),t._v(" "),t._l(t.spaceLists,function(s,i){return e("div",{key:i,staticStyle:{"text-align":"center"},attrs:{index:i}},t._l(s,function(s,n){return e("div",{key:n,class:{infoItem:!0,color:s},attrs:{index:n},on:{click:function(s){return t.itemClick(i,n,s)}}})}),0)}),t._v(" "),e("van-submit-bar",{attrs:{price:t.total,disabled:0==t.size,"button-text":"提交订单"},on:{submit:t.submitOrder}})],2),t._v(" "),e("van-overlay",{attrs:{show:t.showInput}},[e("div",{staticClass:"passPopup"},[e("div",{staticClass:"content"},[e("div",{staticClass:"closse"},[e("van-icon",{attrs:{name:"cross"},on:{click:function(s){return t.overLayClick()}}})],1),t._v(" "),e("div",{staticClass:"title"},[t._v("请输入支付密码")])]),t._v(" "),e("div",{staticClass:"tip"},[t._v("电影票:"+t._s(t.size)+"张")]),t._v(" "),e("div",{staticClass:"total"},[t._v("￥"+t._s(t.total/100))]),t._v(" "),t.showInput?e("van-password-input",{attrs:{value:t.password,info:"请输入6位密码",focused:t.showKeyboard},on:{focus:t.passwordInput}}):t._e()],1),t._v(" "),e("van-number-keyboard",{attrs:{show:t.numberShow},on:{input:t.onInput,delete:t.onDeleted}})],1)],1)},staticRenderFns:[]};var S=e("VU/8")(k,I,!1,function(t){e("8fMo")},"data-v-728cd523",null).exports;e("NYxO");function x(t){return function(){var s=t.apply(this,arguments);return new Promise(function(t,e){return function i(n,a){try{var o=s[n](a),r=o.value}catch(t){return void e(t)}if(!o.done)return Promise.resolve(r).then(function(t){i("next",t)},function(t){i("throw",t)});t(r)}("next")})}}var L={data:function(){return{loginForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},showLogin:!1,height:"0rem"}},mounted:function(){this.showLogin=!0},computed:{},methods:{submitForm:function(t){var s=this;return x(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s.$refs[t].validate(function(){var t=x(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=7;break}return t.next=3,login({user_name:s.loginForm.username,password:s.loginForm.password});case 3:0===(i=t.sent).status?(s.$toast(i.msg),s.$router.push("manage")):s.$toast(i.msg),t.next=9;break;case 7:return s.$toast("用户名或密码错误"),t.abrupt("return",!1);case 9:case"end":return t.stop()}},t,s)}));return function(s){return t.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,s)}))()}},watch:{}},z={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"login_page fillcontain",style:{height:t.height}},[e("transition",{attrs:{name:"form-fade",mode:"in-out"}},[e("section",{directives:[{name:"show",rawName:"v-show",value:t.showLogin,expression:"showLogin"}],staticClass:"form_contianer"},[e("div",{staticClass:"manage_tip"},[e("p",[t._v("elm后台管理系统")])]),t._v(" "),e("el-form",{ref:"loginForm",attrs:{model:t.loginForm,rules:t.rules}},[e("el-form-item",{attrs:{prop:"username"}},[e("el-input",{attrs:{placeholder:"用户名"},model:{value:t.loginForm.username,callback:function(s){t.$set(t.loginForm,"username",s)},expression:"loginForm.username"}},[e("span",[t._v("dsfsf")])])],1),t._v(" "),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.loginForm.password,callback:function(s){t.$set(t.loginForm,"password",s)},expression:"loginForm.password"}})],1),t._v(" "),e("el-form-item",[e("el-button",{staticClass:"submit_btn",attrs:{type:"primary"},on:{click:function(s){return t.submitForm("loginForm")}}},[t._v("登陆")])],1)],1)],1)])],1)},staticRenderFns:[]};var $=e("VU/8")(L,z,!1,function(t){e("Rpuy")},"data-v-2d088d24",null).exports;i.default.use(o.a);var P=new o.a({routes:[{path:"/main",name:"Home",component:v,children:[{path:"dyList/:id",name:"dyList",component:c},{path:"yyList",name:"yyList",component:m},{path:"order",name:"order",component:g},{path:"orderDetail/:orderSn/:yId",name:"orderDetail",component:C,props:!0},{path:"my",name:"my",component:j}]},{path:"/admin/login",name:"AdminLogin",component:$},{path:"/movies/:id",name:"movies",component:S,props:!0},{path:"/",redirect:"/main/yyList"}]}),O=e("Fd2+"),D=e("AXdl");e("4ml/");i.default.use(O.l),i.default.use(O.p),i.default.use(O.n),i.default.use(O.c),i.default.use(O.A),i.default.use(O.B),i.default.use(O.z),i.default.use(O.C),i.default.use(O.E),i.default.use(O.v),i.default.use(O.b),i.default.use(O.D),i.default.use(O.a),i.default.use(O.x),i.default.use(O.s),i.default.use(O.w),i.default.use(O.d),i.default.use(O.m),i.default.use(O.o),i.default.use(O.k),i.default.use(O.j),i.default.use(O.u),i.default.use(O.q),i.default.use(O.y),i.default.use(O.t),i.default.use(O.r),i.default.use(O.h),i.default.use(D.a,{vanImage:!0}),i.default.use(O.i),i.default.use(O.g),i.default.use(O.e),i.default.use(O.f);var E=e("zL8q"),F=e.n(E),T=(e("tvR6"),e("k84x"),e("aFc6"));e("E51W");i.default.use(T.b),i.default.use(T.a);e("97YD");var U=e("PJh5"),R=e.n(U),M={formatTime:function(t){return function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return R()(t).format(s)}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss")},price:function(t){return t.toFixed(2)}},N={install:function(t){for(var s in M)t.filter(s,M[s])}},Y="http://dyp.customer.com:9902/customer",q={CUSTOMER:{CustomerQueryMovice:Y+"/movie/queryMovie",CustmerQueryYYInfo:Y+"/yy/queryYY",CustmerQueryMovieById:Y+"/movie/queryMovieById",CustmerChooseYY:Y+"/yy/chooseYY",CustmerQueryPSpace:Y+"/space/queryPspace",CustmerOrderInsertUpdate:Y+"/order/insertUpdate",CustmerPayOrder:Y+"/order/payOrder",CustmerInfo:Y+"/my/info",CustomerQueryOrder:Y+"/order/queryOrder",CustomerCancelOrder:Y+"/order/cancelOrder",CustomerqueryByOrderSn:Y+"/order/queryByOrderSn",CustomerVIPOpen:Y+"/vip/open"},UPLOADURL:"http://dyp.customer.com:8012/tame/dfs/uploadByFile",QRCODE:Y+"/order/qrCode"},A=e("mtWM"),V=e.n(A);V.a.defaults.withCredentials=!0;i.default.prototype.$Get=function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(e,i){V.a.get(t,{params:s}).then(function(t){var s=t.data;if(-999==s.code)window.location.href=s.data;else{if(0==s.code)return e(s);O.E.fail({message:s.message,showClose:!0,duration:1500})}}).catch(function(t){O.E.fail("网络异常")})})},i.default.prototype.$Post=function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(e,i){V.a.post(t,s,{timeout:3e4}).then(function(t){var s=t.data;if(-999==s.code)window.location.href=s.data;else{if(0==s.code)return e(s);O.E.fail({message:s.message,showClose:!0,duration:1500})}}).catch(function(t){O.E.fail("网络异常")})})},i.default.prototype.$API=q,i.default.use(F.a),i.default.use(N),i.default.config.productionTip=!1,new i.default({el:"#app",router:P,render:function(t){return t(a)}})},QtNN:function(t,s){},Rpuy:function(t,s){},"YO/I":function(t,s){},eM67:function(t,s){},h0l5:function(t,s){},k84x:function(t,s){},tvR6:function(t,s){},uslO:function(t,s,e){var i={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-SG":"oYA3","./en-SG.js":"oYA3","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function n(t){return e(a(t))}function a(t){var s=i[t];if(!(s+1))throw new Error("Cannot find module '"+t+"'.");return s}n.keys=function(){return Object.keys(i)},n.resolve=a,t.exports=n,n.id="uslO"}},["NHnr"]);
//# sourceMappingURL=app.d4f722ed9474a3db8c74.js.map